server:
  port: 8080
  servlet:
    session:
      timeout: 60m  # 1 heure (60 minutes)
      cookie:
        http-only: true
        secure: ${COOKIE_SECURE:false}  # true en production avec HTTPS
        same-site: strict
        max-age: 3600  # 1 heure en secondes
  compression:
    enabled: true
    mime-types: text/css,application/javascript,text/html,application/json

joinfaces:
  faces:
    servlet:
      mapping: "*.xhtml"
      load-on-startup: 1
      welcome-files:
        - "index.xhtml"
logging:
  level:
    jakarta.faces: info
    org.joinfaces: info
    org.flywaydb: DEBUG
    org.springframework.boot.autoconfigure.flyway: DEBUG
    fr.cnrs.opentypo.conf.FlywayDiagnostic: ERROR
spring:
  application:
    name: OpenTypo
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}
  datasource:
    url: jdbc:postgresql://localhost:5432/opentypo
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        # Configuration Hibernate Envers pour l'audit
        envers:
          audit_table_suffix: _aud
          revision_field_name: rev
          revision_type_field_name: revtype
          store_data_at_delete: true
          default_schema: public
        # Configuration pour les relations lazy
        enable_lazy_load_no_trans: true
  flyway:
    enabled: false  # Désactivé pour être géré manuellement après Hibernate
    locations: classpath:db/migration
    baseline-on-migrate: true
    baseline-version: 0
    schemas: public
    validate-on-migrate: true
    clean-disabled: true
    out-of-order: false
  main:
    allow-bean-definition-overriding: true


