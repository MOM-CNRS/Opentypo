/* ============================================
   INDEX - LAYOUT HOMOGÈNE, FLUIDE & RESPONSIVE
   Charte Opentypo - Interface unifiée pour toutes les pages
   ============================================ */

:root {
    --index-gap: 0.75rem;
    --index-padding: 1rem;
    --index-radius: 10px;
    --index-transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ---- 1. Barre de recherche - fluide et responsive ---- */
.app-search {
    flex-shrink: 0 !important;
    padding: 0.5rem var(--index-padding) !important;
    transition: padding var(--index-transition) !important;
}

@media (min-width: 992px) {
    .app-search {
        padding: 0.75rem 1.25rem !important;
    }
}

/* ---- 2. Contenu principal - layout flex fluid ---- */
.app-content {
    flex: 1 1 auto !important;
    display: flex !important;
    flex-wrap: nowrap !important;
    gap: var(--index-gap) !important;
    padding: var(--index-gap) !important;
    min-height: 0 !important;
    overflow: hidden !important;
    align-items: stretch !important;
}

/* ---- 3. Panneau arbre (gauche) - responsive ---- */
.left-tree {
    flex: 0 0 280px !important;
    min-width: 0 !important;
    max-width: 320px !important;
    max-height: calc(100vh - 180px) !important;
    border-radius: var(--index-radius) !important;
    transition: all var(--index-transition) !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

@media (min-width: 992px) {
    .left-tree {
        flex: 0 0 25% !important;
        max-width: 400px !important;
    }
}

@media (min-width: 1200px) {
    .left-tree {
        flex: 0 0 300px !important;
        max-width: 320px !important;
    }
}

/* ---- 4. Zone centrale - prend l'espace restant ---- */
.center-content {
    flex: 1 1 300px !important;
    min-width: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    transition: flex var(--index-transition) !important;
}

/* ---- 5. Contenu détail + cartes - scroll interne ---- */
.center-content .info-concept,
.center-content #cardsContainer {
    flex: 1 1 auto !important;
    min-height: 0 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

/* ---- 6. Wrapper des panneaux détail ---- */
.content-panels-wrapper {
    flex: 1 1 auto !important;
    min-height: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
}

/* ---- 7. Zone concept (détail) - homogène ---- */
.info-concept {
    border-radius: var(--index-radius) !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    padding: 1rem !important;
    transition: box-shadow var(--index-transition) !important;
}

@media (min-width: 992px) {
    .info-concept {
        padding: 1.25rem 1.5rem !important;
    }
}

/* ---- 8. Panneau résultats recherche - fluide ---- */
.search-result {
    flex: 0 0 280px !important;
    min-width: 0 !important;
    max-width: 360px !important;
    border-radius: var(--index-radius) !important;
    transition: all var(--index-transition) !important;
}

@media (max-width: 768px) {
    .search-result {
        flex: 0 0 100% !important;
        max-width: 100% !important;
    }
}

/* ---- 9. Zone présentation + cartes (accueil) ---- */
#cardsContainer {
    padding: 0.5rem !important;
    overflow-y: auto !important;
}

@media (min-width: 768px) {
    #cardsContainer {
        padding: 1rem !important;
    }
}

/* ---- 10. Site presentation & collections - homogène ---- */
.site-presentation-container,
.modern-cards-container {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* ---- 12. Barre de recherche (search.xhtml) - responsive ---- */
.search-bar-compact {
    flex-wrap: wrap !important;
    gap: 0.5rem !important;
}

@media (max-width: 768px) {
    .search-bar-compact {
        flex-wrap: wrap !important;
    }
}

/* ---- 13. Cartes collections (collections-panel.xhtml) - grille responsive ---- */
.modern-cards-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)) !important;
    gap: 1.25rem !important;
}

@media (max-width: 576px) {
    .modern-cards-grid {
        grid-template-columns: 1fr !important;
    }
}

/* ---- 14. Résultats recherche (searchResult.xhtml) - homogène ---- */
.search-results-panel {
    padding: 1rem !important;
}

.search-results-header {
    padding: 0.875rem !important;
    border-radius: 8px !important;
}

.search-result-item {
    border-radius: 8px !important;
    transition: background-color 0.2s ease !important;
}

/* ---- 15. Breadcrumb (breadCrumb.xhtml) - responsive ---- */
.breadcrumb-nav {
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
}

.breadcrumb-list {
    flex-wrap: nowrap !important;
}

@media (max-width: 576px) {
    .breadcrumb-nav {
        padding: 0.375rem 0 !important;
    }
}

/* ---- 11. Mobile : layout adapté ---- */
@media (max-width: 768px) {
    .app-content {
        padding: 0.5rem !important;
        gap: 0.5rem !important;
    }

    .center-content {
        flex: 1 1 auto !important;
        min-height: 150px !important;
    }

    .info-concept {
        padding: 0.75rem !important;
    }
}
