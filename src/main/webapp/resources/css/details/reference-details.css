/* ============================================
   SECTION LISTES CATÉGORIES ET GROUPES
   Design responsive, fluide, charte OpenTypo
   ============================================ */

.reference-categories-section {
    --ref-main: var(--color-action-main, #47624D);
    --ref-main-rgb: 71, 98, 77;
    --ref-text: var(--color-text-primary, #333);
    --ref-text-muted: var(--color-text-secondary, #819A91);
    --ref-bg: #ffffff;
    --ref-border: rgba(var(--ref-main-rgb), 0.12);
    --ref-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
    --ref-shadow-hover: 0 12px 28px rgba(var(--ref-main-rgb), 0.12);
}

/* Masquer les togglers par défaut PrimeFaces */
#categoriesTogglePanel_toggler,
[id$="categoriesTogglePanel_toggler"],
#groupesTogglePanel_toggler,
[id$="groupesTogglePanel_toggler"],
#seriesTogglePanel_toggler,
[id$="seriesTogglePanel_toggler"],
#typesTogglePanel_toggler,
[id$="typesTogglePanel_toggler"],
.categories-unified-block [id$="_toggler"],
.reference-categories-toggle-panel .ui-panel-titlebar [id$="_toggler"] {
    display: none !important;
}

/* Panneau toggleable */
.reference-categories-toggle-panel.ui-panel {
    border: none !important;
    box-shadow: none !important;
    margin: 0 !important;
    background: transparent !important;
}

.reference-categories-toggle-panel .ui-panel-titlebar {
    padding: 0 !important;
    border: none !important;
    background: transparent !important;
    cursor: pointer !important;
}

.reference-categories-toggle-panel .ui-panel-content {
    border: none !important;
    padding: 0 !important;
    background: transparent !important;
}

.reference-categories-toggle-panel .ui-panel-titlebar-content {
    width: 100% !important;
}

.collection-references-header-toggle {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    width: 100% !important;
    gap: 0.75rem !important;
    background: linear-gradient(135deg, rgba(71, 98, 77, 0.08) 0%, rgba(71, 98, 77, 0.04) 100%) !important;
    padding: 1rem 1.25rem !important;
    border-bottom: 1px solid rgba(71, 98, 77, 0.12) !important;
}

.collection-references-header-toggle:hover {
    background: linear-gradient(135deg, rgba(71, 98, 77, 0.1) 0%, rgba(71, 98, 77, 0.06) 100%) !important;
}

.reference-categories-count-badge {
    font-size: 0.8125rem !important;
    font-weight: 600 !important;
    color: var(--color-action-main, #47624D) !important;
    background: rgba(71, 98, 77, 0.1) !important;
    padding: 0.35rem 0.65rem !important;
    border-radius: 6px !important;
    flex-shrink: 0 !important;
}

.reference-categories-toggle-icon {
    font-size: 1rem !important;
    color: var(--color-action-main, #47624D) !important;
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1) !important;
    flex-shrink: 0 !important;
}

.reference-categories-toggle-panel.ui-panel-collapsed .reference-categories-toggle-icon,
.reference-categories-toggle-panel .ui-panel-titlebar[aria-expanded="false"] .reference-categories-toggle-icon {
    transform: rotate(-90deg) !important;
}

/* Cadre du contenu */
.reference-categories-cadre {
    border: 1px solid rgba(71, 98, 77, 0.14) !important;
    border-left: 4px solid var(--color-action-main, #47624D) !important;
    border-radius: 12px !important;
    padding: 1rem 1.25rem !important;
    background: rgba(71, 98, 77, 0.02) !important;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04) !important;
}

/* Barre de recherche */
.reference-categories-search-bar {
    margin-bottom: 1rem !important;
}

.reference-categories-search-input-wrapper {
    position: relative !important;
    display: flex !important;
    align-items: center !important;
}

.reference-categories-search-icon {
    position: absolute !important;
    left: 0.875rem !important;
    color: var(--color-action-main, #47624D) !important;
    font-size: 1rem !important;
    opacity: 0.7 !important;
    pointer-events: none !important;
}

.reference-categories-search-input {
    width: 100% !important;
    max-width: 100% !important;
    padding: 0.625rem 1rem 0.625rem 2.5rem !important;
    border: 1px solid rgba(71, 98, 77, 0.15) !important;
    border-radius: 8px !important;
    font-size: 0.9375rem !important;
}

.reference-categories-search-input:focus,
.reference-categories-search-input.ui-inputtext:focus {
    border-color: var(--color-action-main, #47624D) !important;
    box-shadow: 0 0 0 2px rgba(71, 98, 77, 0.12) !important;
    outline: none !important;
}

.reference-categories-search-input-wrapper .ui-inputtext {
    width: 100% !important;
}

/* Pagination */
.reference-categories-pagination {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 1rem !important;
    margin-top: 1.25rem !important;
    padding-top: 1rem !important;
    border-top: 1px solid rgba(71, 98, 77, 0.1) !important;
}

.reference-categories-page-btn {
    padding: 0.5rem !important;
    min-width: 40px !important;
    border-radius: 8px !important;
    border: 1px solid rgba(71, 98, 77, 0.2) !important;
    background: #ffffff !important;
    color: var(--color-action-main, #47624D) !important;
}

.reference-categories-page-btn:hover:not(:disabled) {
    background: rgba(71, 98, 77, 0.08) !important;
    border-color: var(--color-action-main, #47624D) !important;
}

.reference-categories-page-btn:disabled {
    opacity: 0.4 !important;
    cursor: not-allowed !important;
}

.reference-categories-page-info {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    color: var(--color-text-primary, #333) !important;
}

/* Grille */
.reference-categories-section .reference-categories-form {
    width: 100% !important;
    box-sizing: border-box !important;
}

.reference-categories-section .reference-categories-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 280px), 1fr)) !important;
    gap: 1.25rem !important;
    width: 100% !important;
    align-items: stretch !important;
    border: 1px solid rgba(71, 98, 77, 0.12) !important;
    border-radius: 10px !important;
    padding: 1rem 1.25rem !important;
    background: rgba(71, 98, 77, 0.02) !important;
}

/* Cartes */
.reference-categories-section .reference-category-card,
.reference-categories-section a.reference-category-card,
.reference-categories-section .reference-category-card.ui-commandlink {
    display: block !important;
    text-decoration: none !important;
    color: inherit !important;
    height: 100% !important;
    border: none !important;
    background: transparent !important;
    cursor: pointer !important;
    padding: 0 !important;
    margin: 0 !important;
}

.reference-categories-section .reference-category-card-inner {
    display: flex !important;
    flex-direction: column !important;
    height: 100% !important;
    min-height: 140px !important;
    background: var(--ref-bg) !important;
    border: 1px solid var(--ref-border) !important;
    border-radius: 12px !important;
    padding: 1.125rem !important;
    box-shadow: var(--ref-shadow) !important;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1) !important;
    position: relative !important;
    overflow: hidden !important;
}

.reference-categories-section .reference-category-card-inner::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 3px !important;
    background: linear-gradient(90deg, var(--ref-main) 0%, rgba(var(--ref-main-rgb), 0.5) 100%) !important;
    transform: scaleX(0) !important;
    transform-origin: center !important;
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.reference-categories-section .reference-category-card:hover .reference-category-card-inner {
    border-color: var(--ref-main) !important;
    box-shadow: var(--ref-shadow-hover) !important;
    transform: translateY(-2px) !important;
}

.reference-categories-section .reference-category-card:hover .reference-category-card-inner::before {
    transform: scaleX(1) !important;
}

.reference-categories-section .reference-category-card-header {
    display: flex !important;
    align-items: flex-start !important;
    gap: 1rem !important;
    flex-shrink: 0 !important;
}

.reference-categories-section .reference-category-card-icon {
    width: 48px !important;
    height: 48px !important;
    flex-shrink: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: linear-gradient(135deg, rgba(var(--ref-main-rgb), 0.1) 0%, rgba(var(--ref-main-rgb), 0.05) 100%) !important;
    border-radius: 10px !important;
    color: var(--ref-main) !important;
    font-size: 1.35rem !important;
}

.reference-categories-section .reference-category-card:hover .reference-category-card-icon {
    background: linear-gradient(135deg, var(--ref-main) 0%, rgba(var(--ref-main-rgb), 0.85) 100%) !important;
    color: #ffffff !important;
}

.reference-categories-section .reference-category-card-heading {
    flex: 1 !important;
    min-width: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 0.25rem !important;
}

.reference-categories-section .reference-category-card-title {
    font-size: 1.0625rem !important;
    font-weight: 700 !important;
    color: var(--ref-text) !important;
    margin: 0 !important;
    line-height: 1.3 !important;
}

.reference-categories-section .reference-category-card:hover .reference-category-card-title {
    color: var(--ref-main) !important;
}

.reference-categories-section .reference-category-card-label,
.reference-categories-section .reference-category-card-period {
    font-size: 0.8125rem !important;
    font-weight: 500 !important;
    color: var(--ref-text-muted) !important;
    line-height: 1.4 !important;
}

.reference-categories-section .reference-category-card:hover .reference-category-card-label {
    color: var(--ref-main) !important;
}

.reference-categories-section .reference-category-card-badge-wrapper {
    flex-shrink: 0 !important;
    margin-left: auto !important;
}

.reference-categories-section .reference-category-card-badge {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 32px !important;
    height: 32px !important;
    border-radius: 50% !important;
    font-size: 0.875rem !important;
}

.reference-categories-section .reference-category-card-badge.reference-indicator-brouillon,
.reference-categories-section .reference-category-card-badge.tree-node-status-proposition {
    background: rgba(245, 158, 11, 0.2) !important;
    color: #d97706 !important;
    border: 2px solid rgba(245, 158, 11, 0.4) !important;
}

.reference-categories-section .reference-category-card-badge.reference-indicator-public,
.reference-categories-section .reference-category-card-badge.collection-status-public,
.reference-categories-section .reference-category-card-badge.tree-node-status-validated {
    background: rgba(var(--ref-main-rgb), 0.12) !important;
    color: var(--ref-main) !important;
    border: 2px solid rgba(var(--ref-main-rgb), 0.25) !important;
}

.reference-categories-section .reference-category-card-badge.reference-indicator-private,
.reference-categories-section .reference-category-card-badge.collection-status-private {
    background: rgba(184, 74, 60, 0.12) !important;
    color: var(--color-danger, #B84A3C) !important;
    border: 2px solid rgba(184, 74, 60, 0.25) !important;
}

.reference-categories-section .reference-category-card-body {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    min-height: 0 !important;
    padding-top: 0.875rem !important;
    margin-top: 0.75rem !important;
    border-top: 1px solid rgba(var(--ref-main-rgb), 0.08) !important;
}

.reference-categories-section .reference-category-card-description {
    font-size: 0.875rem !important;
    color: var(--ref-text) !important;
    line-height: 1.65 !important;
    margin: 0 !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 4 !important;
    line-clamp: 4 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

.reference-categories-section .reference-category-card-description-empty {
    display: flex !important;
    align-items: center !important;
    gap: 0.5rem !important;
    -webkit-line-clamp: unset !important;
    line-clamp: unset !important;
    -webkit-box-orient: unset !important;
    font-style: italic !important;
    color: var(--ref-text-muted) !important;
}

.reference-categories-section .reference-category-card-description-empty i {
    color: var(--ref-main) !important;
    opacity: 0.6 !important;
}

/* Message vide */
.reference-categories-section .reference-categories-empty,
.typologie-cards-grid .reference-categories-empty {
    grid-column: 1 / -1 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 3rem 2rem !important;
    text-align: center !important;
    background: linear-gradient(135deg, rgba(var(--ref-main-rgb), 0.04) 0%, rgba(var(--ref-main-rgb), 0.02) 100%) !important;
    border: 1px dashed rgba(var(--ref-main-rgb), 0.2) !important;
    border-radius: 12px !important;
    min-height: 180px !important;
}

.reference-categories-section .reference-categories-empty-icon {
    width: 56px !important;
    height: 56px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: rgba(var(--ref-main-rgb), 0.08) !important;
    border-radius: 50% !important;
    color: var(--ref-main) !important;
    font-size: 1.5rem !important;
    margin-bottom: 1rem !important;
}

.reference-categories-section .reference-categories-empty-title {
    font-size: 1rem !important;
    font-weight: 600 !important;
    color: var(--ref-text) !important;
    margin: 0 0 0.5rem 0 !important;
}

.reference-categories-section .reference-categories-empty-text {
    font-size: 0.875rem !important;
    color: var(--ref-text-muted) !important;
    margin: 0 0 0.75rem 0 !important;
}

.reference-categories-section .reference-categories-empty-hint {
    display: inline-flex !important;
    align-items: center !important;
    gap: 0.5rem !important;
    font-size: 0.8125rem !important;
    color: var(--ref-text-muted) !important;
    padding: 0.5rem 1rem !important;
    background: rgba(var(--ref-main-rgb), 0.06) !important;
    border-radius: 8px !important;
}

/* Responsive */
@media (max-width: 768px) {
    .reference-categories-section .reference-categories-grid {
        grid-template-columns: 1fr !important;
    }
    .reference-categories-section .reference-category-card-inner {
        min-height: 120px !important;
    }
    .reference-categories-section .reference-category-card-icon {
        width: 42px !important;
        height: 42px !important;
        font-size: 1.25rem !important;
    }
    .reference-categories-pagination {
        flex-wrap: wrap !important;
        gap: 0.75rem !important;
    }
    .reference-categories-page-info {
        flex-basis: 100% !important;
        text-align: center !important;
        order: -1 !important;
    }
}

@media (max-width: 480px) {
    .reference-categories-cadre {
        padding: 0.75rem !important;
    }
    .reference-categories-search-input {
        padding: 0.5rem 0.875rem 0.5rem 2.25rem !important;
        font-size: 0.875rem !important;
    }
    .reference-categories-pagination {
        gap: 0.5rem !important;
    }
    .reference-categories-page-btn {
        min-width: 36px !important;
        padding: 0.4rem !important;
    }
}
