<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- Dialog pour créer un nouveau groupe -->
    <p:dialog id="createGroupDialog"
              widgetVar="createGroupDialog"
              header="Créer un nouveau groupe"
              modal="true"
              draggable="false"
              resizable="false"
              styleClass="category-dialog"
              width="600"
              height="auto"
              closable="true"
              responsive="true">

        <h:form id="groupForm">
            <f:event listener="#{groupBean.resetGroupForm}" type="preRenderView"/>
            <div class="category-form-content">
                <div class="category-form-group">
                    <p:outputLabel for="groupCode" value="Code du groupe *" />
                    <p:inputText id="groupCode"
                                 value="#{groupBean.groupCode}"
                                 required="true"
                                 requiredMessage="Le code du groupe est requis"
                                 styleClass="category-input"
                                 placeholder="Ex: GRP001"/>
                </div>

                <div class="category-form-group">
                    <p:outputLabel for="groupLabel" value="Label *" />
                    <p:inputText id="groupLabel"
                                 value="#{groupBean.groupLabel}"
                                 required="true"
                                 requiredMessage="Le label est requis"
                                 styleClass="category-input"
                                 placeholder="Nom du groupe"/>
                </div>

                <div class="category-form-group">
                    <p:outputLabel for="groupDescription" value="Description" />
                    <p:inputTextarea id="groupDescription"
                                     value="#{groupBean.groupDescription}"
                                     rows="5"
                                     cols="50"
                                     autoResize="false"
                                     styleClass="category-textarea"
                                     placeholder="Description du groupe"/>
                </div>
            </div>

            <div class="category-form-actions">
                <p:commandButton value="Annuler"
                                 icon="pi pi-times"
                                 styleClass="category-btn category-btn-cancel"
                                 onclick="PF('createGroupDialog').hide(); return false;"
                                 process="@this"
                                 update="@none"/>

                <p:commandButton value="Valider"
                                 icon="pi pi-check"
                                 styleClass="category-btn category-btn-validate"
                                 action="#{groupBean.createGroup}"
                                 process="@form"
                                 update="@form :growl :groupesContainer :leftTreePanel"
                                 onstart="var btn = this; showButtonLoading(btn);"
                                 oncomplete="var btn = this; setTimeout(function(){hideButtonLoading(btn); forceHideLoading(); if(!args.validationFailed) {PF('createGroupDialog').hide();}}, 100);"
                                 onerror="var btn = this; hideButtonLoading(btn); forceHideLoading();"/>
            </div>
        </h:form>
    </p:dialog>

    <h:outputStylesheet library="css" name="categoryDialog.css"/>
</ui:fragment>
