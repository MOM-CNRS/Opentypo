<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:ui="http://java.sun.com/jsf/facelets">

    <header class="app-header">
        <div class="header-left">
            <div class="burger-button">
                <!-- Barre mobile avec bouton burger -->
                <p:commandButton icon="pi pi-bars text-white"
                                 styleClass="mobile-burger-button"
                                 onclick="toggleSidebar()"
                                 type="button"
                                 title="Menu" />
            </div>

            <!-- Logo texte : Opentypo -->
            <div class="logo-desktop header-logo-text">
                <span class="logo-accent"></span>
                <span class="logo-text">
                    <span class="logo-text-main">Open</span><span class="logo-text-accent">typo</span>
                </span>
            </div>
            <div class="logo-mobile header-logo-text">
                <span class="logo-accent"></span>
                <span class="logo-text">
                    <span class="logo-text-main">Open</span><span class="logo-text-accent">typo</span>
                </span>
            </div>
        </div>
        <h:panelGroup id="selectedEntityLabel" styleClass="header-title" rendered="#{facesContext.viewRoot.viewId != null and facesContext.viewRoot.viewId.contains('/index.xhtml')}">
            <h:outputText value="#{applicationBean.selectedEntityLabel}"/>
        </h:panelGroup>
        <div class="header-right">
            <h:form id="headerForm">
                <!-- Icône d'alertes -->
                <p:commandButton icon="pi pi-bell text-white"
                                 styleClass="p-button-rounded p-button-text p-button-secondary header-icon"
                                 title="Alertes"
                                 action="#{notificationBean.showAlerts}" />

                <!-- Bouton de connexion/déconnexion -->
                <h:panelGroup rendered="#{!loginBean.authenticated}">
                    <p:commandButton icon="pi pi-user text-white"
                                     styleClass="p-button-rounded p-button-text p-button-secondary header-icon"
                                     title="Se connecter"
                                     onclick="showLoginDialog(); return false;"
                                     type="button" />
                </h:panelGroup>
                <h:panelGroup rendered="#{loginBean.authenticated}" id="header">
                    <p:menuButton value="#{loginBean.userDisplayName}"
                                  icon="pi pi-user-check text-white"
                                  styleClass="p-button-rounded p-button-text p-button-secondary header-icon authenticated-user">
                        <p:menuitem value="Mon profil"
                                    icon="pi pi-user"
                                    url="#" />
                        <p:separator />
                        <p:menuitem value="Déconnexion"
                                    icon="pi pi-sign-out"
                                    onclick="PF('confirmLogoutDialog').show(); return false;"
                                    type="button" />
                    </p:menuButton>
                </h:panelGroup>
            </h:form>
        </div>
    </header>
</ui:fragment>