<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <p:dialog id="idLoginDialog"
              widgetVar="loginDialog"
              header="Authentification"
              modal="true"
              closable="true"
              resizable="false"
              draggable="false"
              styleClass="modern-login-dialog"
              width="420"
              height="auto"
              hideEffect="fade"
              onShow="resetLoginFormCommand();">

        <f:facet name="header">
            <div class="modern-login-header">
                <div class="modern-login-header-badge">
                    <i class="pi pi-lock modern-login-header-icon" />
                </div>
                <div class="modern-login-header-text">
                    <h3 class="modern-login-header-title">Connexion</h3>
                    <p class="modern-login-header-subtitle">Accédez à votre espace Opentypo</p>
                </div>
            </div>
        </f:facet>

        <h:form id="loginForm">
            <p:remoteCommand name="resetLoginFormCommand"
                           action="#{loginBean.resetLoginForm}"
                           update=":loginForm"
                           process="@this"/>
            <div class="modern-login-body">
                <p:messages id="loginMessages"
                            for="loginForm"
                            showDetail="true"
                            closable="true"
                            styleClass="modern-login-messages" />

                <div class="modern-login-field">
                    <p:outputLabel for="username" value="Nom d'utilisateur" styleClass="modern-login-label" />
                    <div class="modern-login-input-wrapper">
                        <i class="pi pi-user modern-login-input-icon" />
                        <p:inputText id="username"
                                     value="#{loginBean.username}"
                                     placeholder="Entrez votre nom d'utilisateur"
                                     styleClass="modern-login-input"
                                     required="true"
                                     requiredMessage="Le nom d'utilisateur est requis"
                                     autocomplete="username" />
                    </div>
                </div>

                <div class="modern-login-field">
                    <p:outputLabel for="password" value="Mot de passe" styleClass="modern-login-label" />
                    <div class="modern-login-input-wrapper">
                        <i class="pi pi-lock modern-login-input-icon" />
                        <p:password id="password"
                                    value="#{loginBean.password}"
                                    placeholder="Entrez votre mot de passe"
                                    styleClass="modern-login-input"
                                    toggleMask="true"
                                    redisplay="true"
                                    required="true"
                                    requiredMessage="Le mot de passe est requis"
                                    feedback="false"
                                    autocomplete="current-password" />
                    </div>
                </div>

                <div class="modern-login-actions">
                    <p:commandButton value="Annuler"
                                     icon="pi pi-times"
                                     onclick="PF('loginDialog').hide(); return false;"
                                     type="button"
                                     styleClass="modern-login-btn modern-login-btn-secondary" />

                    <p:commandButton value="Se connecter"
                                     icon="pi pi-sign-in"
                                     action="#{loginBean.login(applicationBean)}"
                                     update=":loginForm:loginMessages, :growl, :headerForm, :sidebarForm, :cardsContainer, :contentPanels, :collectionsForm, :searchForm"
                                     styleClass="modern-login-btn modern-login-btn-primary"
                                     process="@this username password" ajax="true" />
                </div>
            </div>
        </h:form>
    </p:dialog>
</ui:fragment>
