<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- Dialog pour créer une nouvelle série -->
    <p:dialog id="createSerieDialog"
              widgetVar="createSerieDialog"
              header="Créer une nouvelle série"
              modal="true"
              draggable="false"
              resizable="false"
              styleClass="category-dialog"
              width="600"
              height="auto"
              closable="true"
              responsive="true">

        <h:form id="serieForm">
            <f:event listener="#{serieBean.resetSerieForm}" type="preRenderView"/>
            <div class="category-form-content">
                <div class="category-form-group">
                    <p:outputLabel for="serieCode" value="Code de la série *" />
                    <p:inputText id="serieCode"
                                 value="#{serieBean.serieCode}"
                                 required="true"
                                 requiredMessage="Le code de la série est requis"
                                 styleClass="category-input"
                                 placeholder="Ex: SER001"/>
                </div>

                <div class="category-form-group">
                    <p:outputLabel for="serieLabel" value="Label *" />
                    <p:inputText id="serieLabel"
                                 value="#{serieBean.serieLabel}"
                                 required="true"
                                 requiredMessage="Le label est requis"
                                 styleClass="category-input"
                                 placeholder="Nom de la série"/>
                </div>

                <div class="category-form-group">
                    <p:outputLabel for="serieDescription" value="Description" />
                    <p:inputTextarea id="serieDescription"
                                     value="#{serieBean.serieDescription}"
                                     rows="5"
                                     cols="50"
                                     autoResize="false"
                                     styleClass="category-textarea"
                                     placeholder="Description de la série"/>
                </div>
            </div>

            <div class="category-form-actions">
                <p:commandButton value="Annuler"
                                 icon="pi pi-times"
                                 styleClass="category-btn category-btn-cancel"
                                 onclick="PF('createSerieDialog').hide(); return false;"
                                 process="@this"
                                 update="@none"/>

                <p:commandButton value="Valider"
                                 icon="pi pi-check"
                                 styleClass="category-btn category-btn-validate"
                                 action="#{serieBean.createSerie}"
                                 process="@form"
                                 update="@form :growl :seriesContainer :leftTreePanel"
                                 onstart="var btn = this; showButtonLoading(btn);"
                                 oncomplete="var btn = this; setTimeout(function(){hideButtonLoading(btn); forceHideLoading(); if(!args.validationFailed) {PF('createSerieDialog').hide();}}, 100);"
                                 onerror="var btn = this; hideButtonLoading(btn); forceHideLoading();"/>
            </div>
        </h:form>
    </p:dialog>

    <h:outputStylesheet library="css" name="categoryDialog.css"/>
</ui:fragment>
