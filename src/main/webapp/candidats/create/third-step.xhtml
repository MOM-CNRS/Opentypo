<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <div class="wizard-content">
        <div class="wizard-step-content">
            <div class="wizard-step-header">
                <i class="pi pi-file-edit wizard-step-icon" />
                <h3 class="wizard-step-title">Détails complémentaires</h3>
                <p class="wizard-step-description">Complétez les informations spécifiques selon le type sélectionné</p>
            </div>

            <!-- 1ère partie : Récapitulatif des informations des étapes 1 et 2 -->
            <div class="users-form-panel wizard-form-panel summary-panel">
                <div class="summary-content">
                    <div class="summary-section">
                        <div class="summary-grid">
                            <div class="summary-item">
                                <span class="summary-label">Type d'entité :</span>
                                <span class="summary-value">
                                    <i class="pi pi-tag summary-value-icon" />
                                    #{candidatBean.getEntityTypeName(candidatBean.selectedEntityType)}
                                </span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Code :</span>
                                <span class="summary-value">
                                    <i class="pi pi-code summary-value-icon" />
                                    #{candidatBean.entityCode}
                                </span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Label :</span>
                                <span class="summary-value">
                                    <i class="pi pi-tag summary-value-icon" />
                                    #{candidatBean.entityLabel}
                                </span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Langue :</span>
                                <span class="summary-value">
                                    <i class="pi pi-globe summary-value-icon" />
                                    #{candidatBean.getSelectedLangueName()}
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="summary-section">
                        <div class="summary-grid">
                            <div class="summary-item">
                                <span class="summary-label">Collection :</span>
                                <span class="summary-value">
                                    <i class="pi pi-folder summary-value-icon" />
                                    #{candidatBean.getCollectionLabel(candidatBean.selectedCollection)}
                                </span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Élément parent :</span>
                                <span class="summary-value">
                                    <i class="pi pi-sitemap summary-value-icon" />
                                    #{candidatBean.selectedParentEntity != null ? candidatBean.selectedParentEntity.code : 'Non sélectionné'}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2ème partie : Formulaire dynamique selon le type d'entité -->
            <div class="users-form-panel wizard-form-panel candidats-p-10">
                <div class="wizard-content candidats-p-20">
                    <ui:include src="../form/labels-form.xhtml"/>

                    <h:panelGroup rendered="#{candidatBean.selectedEntityTypeId == 5}">
                        <ui:include src="../form/appelation_type.xhtml"/>

                        <ui:include src="../form/relations_type.xhtml"/>
                    </h:panelGroup>

                    <ui:include src="../form/descriptions-form.xhtml"/>

                    <h:panelGroup rendered="#{candidatBean.selectedEntityTypeId != 2}">
                        <ui:include src="../form/periode-tpq-taq.xhtml"/>

                        <ui:include src="../form/divers.xhtml"/>

                        <h:panelGroup rendered="#{empty candidatBean.selectedCollection or candidatBean.selectedCollection.code ne 'MONNAIE'}">
                            <ui:include src="../form/details.xhtml"/>
                            <ui:include src="../form/caracteristiques-physiques.xhtml"/>
                        </h:panelGroup>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{candidatBean.selectedEntityTypeId == 5}">
                        <ui:include src="../form/details_type.xhtml"/>
                    </h:panelGroup>

                    <ui:include src="../form/commentaire-bibliographie.xhtml" />
                </div>

                <!-- Styles personnalisés pour le formulaire de groupe -->
                <h:outputStylesheet library="css" name="candidats/candidats-group-form.css"/>
                <h:outputStylesheet library="css" name="candidats/candidats-category-form.css"/>
            </div>
        </div>
    </div>
</ui:composition>
