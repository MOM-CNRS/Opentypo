<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <div class="wizard-content">
        <div class="wizard-step-content">
            <div class="wizard-step-header">
                <i class="pi pi-file-edit wizard-step-icon" />
                <h3 class="wizard-step-title">Détails complémentaires</h3>
                <p class="wizard-step-description">Complétez les informations spécifiques selon le type sélectionné</p>
            </div>

            <!-- 1ère partie : Récapitulatif des informations des étapes 1 et 2 -->
            <div class="users-form-panel wizard-form-panel summary-panel">
                <div class="summary-content">
                    <div class="summary-section">
                        <div class="summary-grid">
                            <div class="summary-item">
                                <span class="summary-label">Type d'entité :</span>
                                <span class="summary-value">
                                    <i class="pi pi-tag summary-value-icon" />
                                    #{candidatBean.getEntityTypeName(candidatBean.selectedEntityType)}
                                </span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Code :</span>
                                <span class="summary-value">
                                    <i class="pi pi-code summary-value-icon" />
                                    #{candidatBean.entityCode}
                                </span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Label :</span>
                                <span class="summary-value">
                                    <i class="pi pi-tag summary-value-icon" />
                                    #{candidatBean.entityLabel}
                                </span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Langue :</span>
                                <span class="summary-value">
                                    <i class="pi pi-globe summary-value-icon" />
                                    #{candidatBean.getSelectedLangueName()}
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="summary-section">
                        <div class="summary-grid">
                            <div class="summary-item">
                                <span class="summary-label">Collection :</span>
                                <span class="summary-value">
                                    <i class="pi pi-folder summary-value-icon" />
                                    #{candidatBean.getCollectionLabel(candidatBean.selectedCollection)}
                                </span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Élément parent :</span>
                                <span class="summary-value">
                                    <i class="pi pi-sitemap summary-value-icon" />
                                    #{candidatBean.selectedParentEntity != null ? candidatBean.selectedParentEntity.code : 'Non sélectionné'}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2ème partie : Formulaire dynamique selon le type d'entité -->
            <div class="users-form-panel wizard-form-panel" style="padding: 10px">
                <!-- Formulaire pour CATEGORY -->
                <ui:fragment rendered="#{candidatBean.selectedEntityTypeId == 2}">
                    <ui:include src="form/category-form.xhtml"/>
                </ui:fragment>

                <!-- Formulaire pour GROUP -->
                <ui:fragment rendered="#{candidatBean.selectedEntityTypeId == 3}">
                    <ui:include src="form/group-form.xhtml"/>
                </ui:fragment>

                <!-- Formulaire pour SERIES -->
                <ui:fragment rendered="#{candidatBean.selectedEntityTypeId == 4}">
                    <ui:include src="form/serie-form.xhtml"/>
                </ui:fragment>


                <ui:fragment rendered="#{candidatBean.selectedEntityTypeId == 5}">
                    <ui:include src="form/type-form.xhtml"/>
                </ui:fragment>
            </div>
        </div>
    </div>
</ui:composition>
