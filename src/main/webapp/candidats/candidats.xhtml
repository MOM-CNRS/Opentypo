<ui:composition template="../commun/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="mainContent">
        <f:event type="preRenderView" listener="#{candidatBean.loadCandidatsPage()}"/>

        <!-- En-tête de page -->
        <div class="users-container">
            <div class="users-header">
                <div class="users-header-content">
                    <div>
                        <h1 class="users-title">
                            <i class="pi pi-users users-title-icon" />
                            Gestion des brouillons
                        </h1>
                        <p class="users-subtitle">Gérez et suivez les propositions de types</p>
                    </div>
                    <h:form>
                        <p:commandButton value="Nouveau brouillon"
                                       icon="pi pi-plus"
                                       styleClass="users-create-button"
                                       action="/candidats/create.xhtml?faces-redirect=true"
                                       process="@this"
                                       update="@none"/>
                    </h:form>
                </div>
            </div>

            <!-- Contenu principal : formulaire et onglets -->
            <div class="users-content">
                <h:form id="candidatsForm">
                    <p:tabView id="candidatsTabs"
                              activeIndex="#{candidatBean.activeTabIndex}"
                              styleClass="users-tabview"
                              dynamic="true"
                              cache="false">
                        <ui:include src="tabs/tab-en-cours.xhtml"/>
                        <ui:include src="tabs/tab-valides.xhtml"/>
                        <ui:include src="tabs/tab-refuses.xhtml"/>
                    </p:tabView>

                    <!-- Dialogs de confirmation -->
                    <ui:include src="dialogs/confirmValidateDialog.xhtml"/>
                    <ui:include src="dialogs/confirmDeleteDialog.xhtml"/>
                </h:form>
            </div>
        </div>
    </ui:define>

    <h:outputStylesheet library="css" name="candidats/candidats-forms-common.css"/>
    <h:outputStylesheet library="css" name="candidats/candidats-list.css"/>
    <h:outputScript library="js" name="candidats/candidats-list.js"/>

</ui:composition>
