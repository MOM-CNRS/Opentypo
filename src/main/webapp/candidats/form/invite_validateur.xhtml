<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <!-- Section Validateurs - Invitation -->
    <h:panelGroup id="validateursSection" class="users-form-panel wizard-form-panel candidats-mt-20"
                  rendered="#{candidatBean.canValidateOrRefuseBrouillon() and candidatBean.currentEntity != null and candidatBean.currentEntity.id != null}">
        <div class="users-form-group users-form-group-full periode-group candidats-mt-20">
            <div class="users-form-group users-form-group-full">
                <p:outputLabel value="Validateurs invités" />
                <div class="auteurs-list candidats-mb-10">
                    <ui:repeat value="#{candidatBean.validateursDisplayNames}" var="validateur">
                        <div class="auteur-item">
                        <span class="auteur-avatar auteur-avatar--validateur">
                            <i class="pi pi-user-check auteur-icon" />
                        </span>
                            <span class="auteur-name">#{validateur}</span>
                        </div>
                    </ui:repeat>
                    <ui:fragment rendered="#{empty candidatBean.validateursDisplayNames}">
                        <div class="auteurs-empty-state">
                            <span class="auteurs-empty-icon"><i class="pi pi-user-plus" /></span>
                            <p class="auteurs-empty">Aucun validateur invité</p>
                        </div>
                    </ui:fragment>
                </div>
                <p:outputLabel value="Inviter des validateurs" />
                <div class="candidats-validateurs-picklist-row">
                    <p:pickList id="validateursPickList"
                                value="#{candidatBean.validateursPickList}"
                                var="userId"
                                itemLabel="#{candidatBean.getUtilisateurDisplayName(userId)}"
                                itemValue="#{userId}"
                                converter="pickListLongConverter"
                                styleClass="group-dialog-picklist"
                                showSourceFilter="true"
                                showTargetFilter="true"
                                filterMatchMode="contains"
                                sourceFilterPlaceholder="Rechercher..."
                                targetFilterPlaceholder="Rechercher..."
                                responsive="true"
                                rendered="#{not empty candidatBean.validateursList}"/>
                    <p:commandButton value="Envoyer invitation"
                                     icon="pi pi-send"
                                     styleClass="candidat-btn-add candidats-ml-10"
                                     action="#{candidatBean.prepareSendValidateurInvitation}"
                                     process="@this validateursPickList"
                                     update=":growl, :confirmValidateurInvitationDialogContent"
                                     oncomplete="if (!args.validationFailed) { PF('confirmValidateurInvitationDialog').show(); }"/>
                </div>
                <h:panelGroup rendered="#{empty candidatBean.validateursList}" class="group-dialog-no-relecteurs">
                    <span>Aucun utilisateur disponible</span>
                </h:panelGroup>
            </div>
        </div>
    </h:panelGroup>
</ui:composition>

