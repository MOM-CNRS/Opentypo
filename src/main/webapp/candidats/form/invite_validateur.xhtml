<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <!-- Section Intervenants : Rédacteurs, Relecteurs, Validateurs -->
    <h:panelGroup id="intervenantsSection" class="users-form-panel wizard-form-panel candidats-mt-20"
                  rendered="#{candidatBean.canValidateOrRefuseBrouillon() and candidatBean.currentEntity != null and candidatBean.currentEntity.id != null}">

        <!-- Rédacteurs -->
        <div class="users-form-group users-form-group-full periode-group candidats-mt-20">
            <div class="users-form-group users-form-group-full">
                <p:outputLabel value="Assigner des rédacteurs" />
                <div class="candidats-validateurs-picklist-row">
                    <p:pickList id="redacteursPickList"
                                value="#{candidatBean.redacteursPickList}"
                                var="userId"
                                itemLabel="#{candidatBean.getUtilisateurDisplayName(userId)}"
                                itemValue="#{userId}"
                                converter="pickListLongConverter"
                                styleClass="group-dialog-picklist"
                                showSourceFilter="true"
                                showTargetFilter="true"
                                filterMatchMode="contains"
                                sourceFilterPlaceholder="Rechercher..."
                                targetFilterPlaceholder="Rechercher..."
                                responsive="true"
                                rendered="#{not empty candidatBean.redacteursList}"/>
                    <p:commandButton value="Assigner"
                                     icon="pi pi-user-plus"
                                     styleClass="candidat-btn-add candidats-ml-10"
                                     action="#{candidatBean.assignRedacteurs}"
                                     process="@form"
                                     update=":growl, :intervenantsSection"/>
                </div>
                <h:panelGroup rendered="#{empty candidatBean.redacteursList}" class="group-dialog-no-relecteurs">
                    <span>Aucun rédacteur disponible</span>
                </h:panelGroup>
            </div>
        </div>

        <!-- Relecteurs -->
        <div class="users-form-group users-form-group-full periode-group candidats-mt-20">
            <div class="users-form-group users-form-group-full">
                <p:outputLabel value="Assigner des relecteurs" />
                <div class="candidats-validateurs-picklist-row">
                    <p:pickList id="relecteursPickList"
                                value="#{candidatBean.relecteursPickList}"
                                var="userId"
                                itemLabel="#{candidatBean.getUtilisateurDisplayName(userId)}"
                                itemValue="#{userId}"
                                converter="pickListLongConverter"
                                styleClass="group-dialog-picklist"
                                showSourceFilter="true"
                                showTargetFilter="true"
                                filterMatchMode="contains"
                                sourceFilterPlaceholder="Rechercher..."
                                targetFilterPlaceholder="Rechercher..."
                                responsive="true"
                                rendered="#{not empty candidatBean.relecteursList}"/>
                    <p:commandButton value="Assigner"
                                     icon="pi pi-user-plus"
                                     styleClass="candidat-btn-add candidats-ml-10"
                                     action="#{candidatBean.assignRelecteurs}"
                                     process="@form"
                                     update=":growl, :intervenantsSection"/>
                </div>
                <h:panelGroup rendered="#{empty candidatBean.relecteursList}" class="group-dialog-no-relecteurs">
                    <span>Aucun relecteur disponible</span>
                </h:panelGroup>
            </div>
        </div>

        <!-- Validateurs -->
        <div class="users-form-group users-form-group-full periode-group candidats-mt-20">
            <div class="users-form-group users-form-group-full">
                <p:outputLabel value="Inviter des validateurs" />
                <div class="candidats-validateurs-picklist-row">
                    <p:pickList id="validateursPickList"
                                value="#{candidatBean.validateursPickList}"
                                var="userId"
                                itemLabel="#{candidatBean.getUtilisateurDisplayName(userId)}"
                                itemValue="#{userId}"
                                converter="pickListLongConverter"
                                styleClass="group-dialog-picklist"
                                showSourceFilter="true"
                                showTargetFilter="true"
                                filterMatchMode="contains"
                                sourceFilterPlaceholder="Rechercher..."
                                targetFilterPlaceholder="Rechercher..."
                                responsive="true"
                                rendered="#{not empty candidatBean.validateursList}"/>
                    <p:commandButton value="Envoyer invitation"
                                     icon="pi pi-send"
                                     styleClass="candidat-btn-add candidats-ml-10"
                                     action="#{candidatBean.prepareSendValidateurInvitation}"
                                     process="@form"
                                     update=":growl, :confirmValidateurInvitationDialogContent"
                                     oncomplete="if (!args.validationFailed) { PF('confirmValidateurInvitationDialog').show(); }"/>
                </div>
                <h:panelGroup rendered="#{empty candidatBean.validateursList}" class="group-dialog-no-relecteurs">
                    <span>Aucun validateur disponible</span>
                </h:panelGroup>
            </div>
        </div>
    </h:panelGroup>
</ui:composition>

